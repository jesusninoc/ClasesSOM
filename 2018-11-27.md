# Persmisos
## Obtener los descriptores de seguridad de todos los ficheros de una unidad
https://www.jesusninoc.com/2016/09/10/obtener-los-descriptores-de-seguridad-de-todos-los-ficheros-de-una-unidad/

## Añadir permiso NTFS a una carpeta
https://www.jesusninoc.com/08/19/anadir-permiso-ntfs-a-una-carpeta

|Atributos|Valor|Descripción|
|--|--|--|
|ContainerInherit|1|Los objetos contenedores secundarios se heredan de la ACE.|
|None|0|Los objetos secundarios no se heredan de la ACE.|
|ObjectInherit|2|Los objetos hoja secundarios se heredan de la ACE.|

## Ejercicios
### Asignar varios permisos a una carpeta
```PowerShell
# 'pepito', 'FullControl', 'ContainerInherit, ObjectInherit', 'None', 'Allow'
# 'gi1', 'FullControl', 'ContainerInherit, ObjectInherit', 'None', 'Allow'
$permisos = Get-Acl -Path directorio
gc  .\permisos.txt | %{
$_
    $regla = New-Object -TypeName System.Security.AccessControl.FileSystemAccessRule -ArgumentList ($_.replace(", '","@").split("@").replace("'",""))
    $permisos.SetAccessRule($regla)
    $permisos | Set-Acl -Path directorio
}
```
### Asignar varios permisos a distintas carpetas
```PowerShell
# carpeta1,'pepito', 'FullControl', 'ContainerInherit, ObjectInherit', 'None', 'Allow'
# carpeta2,'gi1', 'FullControl', 'ContainerInherit, ObjectInherit', 'None', 'Allow'

$permisos = Get-Acl -Path .\carpeta1
$permisos2 = Get-Acl -Path .\carpeta2
$arcpermisos = (gc .\permisos.txt)
$regla = New-Object -TypeName System.Security.AccessControl.FileSystemAccessRule -ArgumentList $arcpermisos[0]
$regla2 = New-Object -TypeName System.Security.AccessControl.FileSystemAccessRule -ArgumentList $arcpermisos[1]
$permisos.SetAccessRule($regla)
$permisos2.SetAccessRule($regla2)
$permisos | Set-Acl -Path .\carpeta1
$permisos2 | Set-Acl -Path .\carpeta2
```
